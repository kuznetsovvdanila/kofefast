<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <title>
            kofefast
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <script type="text/javascript">

        }
    </script>
    </head>
    <body>
        <div class="topMenu flex">
            <div class="logo" style="font-size: 4.5em;">
                <a href="{% url 'index' %}" style="color: #eeeeee;">kofefast</a>
            </div>
            {% if request.user.is_authenticated %}
            <div class="topMenuNotMobile">
                <div class="addressPart flex">
                    <form action="" method="POST" class="sendIt flex">
                        <input name="action_type" type="text" value="prefer_address" style="display: none;">
                        <select class="pointer" id="" name="prefered_adr_id">
                            <option value="">Приду и заберу</option>
                            {% if addresses %}
                                {% for adr in addresses %}
                                    <option value="{{adr.id}}" style="text-overflow: ellipsis;" {% if adr.chosen %} selected="selected"{% endif %} value="{{ adr.name }}">{{ adr.name }} ({{ adr.street }} {{ adr.house }})</option>
                                {% endfor %}
                            {% endif %}
                            <option value="addAnAddress">Добавить адрес</option>
                        </select>
                        {% csrf_token %}
                    </form>
                </div>
                <a href="{% url 'basket' %}">
                    <div class="basketImage pointer">

                    </div>
                </a>
                <a href="{% url 'personal_area' %}" style="color: #eeeeee;">
                    <div style="{% if user.profile_picture %} background-image: url({{ user.profile_picture.url }}); filter: none !important; border: 5px solid #eeeeee; border-radius: 40px; height: 60px !important; width: 60px !important; {% else %} background-image: url('../../static/img/anonymous.svg'); {% endif %} background-position: 50% 50%; background-size: cover;" class="defaultUserPhoto pointer">

                    </div>
                </a>
            </div>
            {% else %}
            <div>

            </div>
            {% endif %}
<!--            {% if not request.user.is_authenticated %}-->
<!--                <div class="defaultUserPhoto softBorder pointer">-->
<!--                    <div style="padding: 10px 0 10px 30px; font-size: 2em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">-->
<!--                        <b>Войти</b>-->
<!--                    </div>-->
<!--                </div>-->
<!--            {% else %}-->
<!--                <div class="defaultUserPhotoAuth softBorder pointer">-->
<!--                    <div style="padding: 10px 0 10px 30px; font-size: 2em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">-->
<!--                        <a href="{% url 'personal_area' %}">-->
<!--                            <b>Личный кабинет</b>-->
<!--                        </a>-->
<!--                    </div>-->
<!--                </div>-->
<!--            {% endif %}-->
        </div>
        <hr class="lineMobile">
        {% if not request.user.is_authenticated %}
            <div class="main flex">
                <div class="description">
                    мы реально крутые, пользуйтесь нашим офигенным сайтом
                    кофе ещё никогда не был так близко,
                </div>
                <input type="submit" class="registrationButton active pointer" value="Зарегистрироваться">
                <div class="rightSide">
                    <div class="information active">
                        Открытие кофе относится приблизительно к 850 г. н. э., но полное признание его пришло много веков спустя. Первоначально в качестве тонизирующего средства употреблялся не отвар обжаренных зёрен, а непосредственно сырые кофейные ягоды.
                    </div>

                    <div class="registration">
                        <div class="flex btw">
                            <span class="frm">Регистрация</span>
                            <span class="closeIt" style=""><b>x</b></span>
                        </div>
                        <div class="">
                            <form action="" method="POST" class="flex">
                                <input name="action_type" type="text" value="registr" style="display: none;">
                                <input type="text" name="email" maxlength="150" autocapitalize="none" autocomplete="email" autofocus="" required="" id="id_email" placeholder="Почта">
                                <input type="text" name="first_name" autocomplete="none" required="" id="id_first_name" placeholder="Имя">
                                <input type="text" name="last_name" autocomplete="none" required="" id="id_last_name" placeholder="Фамилия">
                                <input type="text" name="phone_number" autocomplete="none" required="" id="phone_number" placeholder="Телефон">
                                {{ form.password1 }}
                                {{ form.password2 }}
                                {% csrf_token %}
                                <input type="submit" value="Зарегистрироваться" class="pointer">
                                <div class="openAuth pointer" style="font-size: 1.5em; margin: 15px;">
                                    Уже с нами? Войти
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="authorization">
                        <div class="">
                            <div class="flex btw">
                                <span class="frm">Вход</span>
                                <span class="closeIt" style=""><b>x</b></span>
                            </div>
                            <form action="" method="POST" class="flex">
                                <input name="action_type" type="text" value="authen" style="display: none;">
                                <input type="text" name="email" maxlength="150" autocapitalize="none" autocomplete="email" autofocus="" required="" id="id_email" placeholder="Почта">
                                <input type="password" name="password1" autocomplete="new-password" required="" id="id_password1" aria-autocomplete="list" placeholder="Пароль">
                                {% csrf_token %}
                                <input type="submit" value="Войти" class="pointer">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mainMobile flex">
                <div class="descriptionMobile">
                    мы реально крутые, пользуйтесь нашим офигенным сайтом
                </div>
                <div class="registrationButtonMobile active">
                    <span>
                        Ещё не с нами? Жми <span style="background-color: #deb887; color: #111111;"><b>сюда</b></span>, давай мы это исправим
                    </span>
                </div>
                <div class="rightSideMobile flex">
                    <div class="informationMobile active">
                        Уже целых 0 лет мы занимаемся доставкой кофе и ещё там чего-то из менее чем 1 кофейни города Москвы и только
                    </div>

                    <div class="registrationMobile">
                        <div class="flex btw">
                            <span class="frm">Регистрация</span>
                            <span class="closeIt" style=""><b>x</b></span>
                        </div>
                        <div class="">
                            <form action="" method="POST" class="flex">
                                <input name="action_type" type="text" value="registr" style="display: none;">
                                <input type="text" name="email" maxlength="150" autocapitalize="none" autocomplete="email" autofocus="" required="" id="id_email" placeholder="Почта">
                                <input type="text" name="first_name" autocomplete="none" required="" id="id_first_name" placeholder="Имя">
                                <input type="text" name="last_name" autocomplete="none" required="" id="id_last_name" placeholder="Фамилия">
                                {{ form.password1 }}
                                {{ form.password2 }}
                                {% csrf_token %}
                                <input type="submit" value="Зарегистрироваться" class="pointer">
                                <div class="openAuthMobile pointer" style="font-size: 5em; margin: 0px 50px 50px 50px;">
                                    Уже с нами? Войти
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="authorizationMobile">
                        <div class="flex btw">
                            <span class="frm">Вход</span>
                            <span class="closeIt" style=""><b>x</b></span>
                        </div>
                        <div class="">
                            <form action="" method="POST" class="flex">
                                <input name="action_type" type="text" value="authen" style="display: none;">
                                <input type="text" name="email" maxlength="150" autocapitalize="none" autocomplete="email" autofocus="" required="" id="id_email" placeholder="Почта">
                                <input type="password" name="password1" autocomplete="new-password" required="" id="id_password1" aria-autocomplete="list" placeholder="Пароль">
                                {% csrf_token %}
                                <input type="submit" value="Войти" class="pointer">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="mainAuth flex">
                {% if not chosen_items %}
                    <div class="hd">
                        Выберите кофейню:
                    </div>
                    <div class="categories flex">
                        <div class="provider del active">
                            Любая
                        </div>
                        {% for provider in providers %}
                            <div id="{{ provider.id }}" class="provider flex vCenter btw">
                                <div>
                                    {{ provider.name }}
                                </div>
                                <div class="mapPointImage">

                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div style="flex-wrap: wrap;" class="hd flex clmn">
                        <div>
                            Выбранная кофейня:
                        </div>
                        <div class="chs flex vCenter btw">
                            <div style="margin: 0 20px 0 0; font-size: 1.1em;">
                                {{ prvdr }}
                            </div>
                            <div class="cancel" style="">
                                <form action="" method="POST" class="flex">
                                    <input name="action_type" type="text" value="clear_the_basket" style="display: none;">
                                    {% csrf_token %}
                                    <input type="submit" value="Отменить выбор" class="pointer">
                                </form>
                            </div>
                        </div>
                    </div>
                    <hr class="line">
                    <div style="width: 85%;">
                        <form class="makeAnOrder flex btw">
                            <div class="flex clmn">
                                <div class="basketHd">
                                    Что у вас в корзине:
                                </div>
                                <div class="basketList">
                                    {% for item in chosen_items %}
                                        <div>
                                            {{ item.good.price }}₽ -  {{ item.good.name }}, {{ item.count }} шт.
                                        </div>
                                    {% endfor %}
                                </div>
                                <div class="basketHd">
                                    Итого: {{ basket.all_cost }}₽
                                </div>
                            </div>
                            <div class="prmtrs">
                                <div>
                                    {% if chosen_address %}
                                        <div class="basketHd">
                                            Адрес доставки:
                                        </div>
                                        <div class="basketAddress">
                                            {{ chosen_address.name }} ({{ chosen_address.street }}, {{ chosen_address.house }}, к{{ chosen_address.building }})
                                        </div>
                                        <div style="max-width: 400px; margin: 10px 0 0 0; font-size: 0.7em;">
                                            Мы хотим, чтобы вы получили свежий, только что приготовленный продукт, поэтому все кофейни привязаны к определённым адресам. Изменить адрес доставки невозможно
                                        </div>
                                    {% else %}
                                        <div class="basketHd">
                                            Самовывоз
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="time flex">
                                <div class="basketHd">
                                    Желаемое время получения:
                                </div>
                            </div>
                        </form>
                    </div>
                {% endif %}
                <hr class="line">
                <div class="list">
                    <div class="coffee flex active">
                        <div class="hd" style="width: 100%; text-align: center;">
                            Напитки
                        </div>
                        {% for drink in drinks %}
                            {% if drink.provided in coffeeshops %}
                                <div id="{{ drink.provided.id }}" class="btw item show" style="background: linear-gradient(to left, rgba({{ drink.primary_color }}) 60%, transparent); background-image: url('{{ drink.preview.url }}'); background-size: cover; background-position: right 50%">
                                    <div class="cntnr flex">
                                        <div class="itemName">
                                            <b><span>{{ drink.name }} - {{ drink.provided }}</span></b>
                                        </div>
                                        <div class="itemDescription">
                                            <span style="background-color: #111111; color: #eeeeee;">{{ drink.description }}</span>
                                        </div>
                                        <div class="itemPrice">
                                            <span><b>{{ drink.price }}₽</b></span>
                                        </div>
                                    </div>
    <!--                                <div class="itemPhoto reallySoftBorder" style="background-image: url('{{ drink.preview.url }}'); -webkit-mask-image: linear-gradient(to left, rgba(0, 0, 0, 1.0), transparent);">-->

    <!--                                </div>-->
                                    <div class="addToBasket flex reallySoftBorder clmn">
                                        <div>
                                            <form action="" method="POST">
                                                <input name="action_type" type="text" value="add {{ drink.id }}" style="display: none;">
                                                {% csrf_token %}
                                                <input type="submit" value="+" class="pointer">
                                            </form>
                                        </div>
                                        <div class="counter" style="">
                                            {{ drink.count }}
                                        </div>
                                        <div>
                                            <form action="" method="POST">
                                                <input name="action_type" type="text" value="reduce {{ drink.id }}" style="display: none;">
                                                {% csrf_token %}
                                                <input type="submit" value="-" class="pointer">
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <div class="food flex active">
                        <div class="hd" style="width: 100%; text-align: center;">
                            Еда
                        </div>
                        {% for dish in food %}
                            {% if dish.provided in coffeeshops %}
                                <div id="{{ dish.provided.id }}" class="item show" style="background: linear-gradient(to left, rgba({{ dish.primary_color }}) 60%, transparent); background-image: url('{{ dish.preview.url }}'); background-size: cover; background-position: right 50%">
                                    <div class="cntnr flex">
                                        <div class="itemName">
                                            <b><span>{{ dish.name }} - {{ dish.provided }}</span></b>
                                        </div>
                                        <div class="itemDescription">
                                            <span style="background-color: #111111; color: #eeeeee;">{{ dish.description }}</span>
                                        </div>
                                        <div class="itemPrice">
                                            <span><b>{{ dish.price }}₽</b></span>
                                        </div>
                                    </div>
    <!--                                <div class="itemPhoto reallySoftBorder" style="background-image: url('{{ drink.preview.url }}'); -webkit-mask-image: linear-gradient(to left, rgba(0, 0, 0, 1.0), transparent);">-->

    <!--                                </div>-->
                                    <div class="addToBasket flex reallySoftBorder clmn">
                                        <div>
                                            <form action="" method="POST">
                                                <input name="action_type" type="text" value="add {{ dish.id }}" style="display: none;">
                                                {% csrf_token %}
                                                <input type="submit" value="+" class="pointer">
                                            </form>
                                        </div>
                                        <div class="counter" style="">
                                            {{ dish.count }}
                                        </div>
                                        <div>
                                            <form action="" method="POST">
                                                <input name="action_type" type="text" value="reduce {{ dish.id }}" style="display: none;">
                                                {% csrf_token %}
                                                <input type="submit" value="-" class="pointer">
                                            </form>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>



            <div class="addressMenuMainPage flex">
                <div class="arrowMobile flex">
                    <div class="arrow">
                        <b>ᐃ</b>
                    </div>
                </div>
                <div class="addressList">
                    <div>
                        <a href="{% url 'personal_area' %}">Личный кабинет</a>
                    </div>
                    <div>
                        <a href="{% url 'basket' %}">Корзина</a>
                    </div>
                    <hr class="lineMobile">
                    <div>
                        Выберите адрес:
                    </div>
                    {% if addresses %}
                        {% for adr in addresses %}
                            {% if adr.chosen %}
                                <div style="border: 15px solid #deb887 !important;" class="address flex btw vCenter">
                                    <div>
                                        <span style="background-color: #eeeeee;" class="addressName"><b>{{ adr.name }}, {{ adr.street }} {{ adr.house }}</b></span>
                                    </div>
                                    <div class="">
                                        <form action="" method="POST" class="inside flex">
                                            <input name="action_type" type="text" value="delete_prefer_address" style="display: none;">
                                            <input name="prefered_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                            {% csrf_token %}
                                            <input type="submit" value="X" class="chooseAnAddress pointer">
                                        </form>
                                    </div>
                                </div>
                            {% else %}
                                <div class="address flex btw vCenter">
                                    <div>
                                        <span class="addressName"><b>{{ adr.name }}, {{ adr.street }} {{ adr.house }}</b></span>
                                    </div>
                                    <div class="">
                                        <form action="" method="POST" class="inside flex">
                                            <input name="action_type" type="text" value="prefer_address" style="display: none;">
                                            <input name="prefered_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                            {% csrf_token %}
                                            <input type="submit" value="✔" class="chooseAnAddress pointer">
                                        </form>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                        <a href="{% url 'personal_area' %}">
                            <div class="address flex btw vCenter">
                                <div>
                                    <span class="addressNameAdd"><b>Добавьте адрес</b></span>
                                </div>
                                <div class="addAnAddress">
                                    <b>+</b>
                                </div>
                            </div>
                        </a>
                    </div>
                    {% else %}
                        <a href="{% url 'personal_area' %}">
                            <div class="address flex btw vCenter">
                                <div>
                                    <span class="addressNameAdd"><b>Добавьте адрес</b></span>
                                </div>
                                <div class="addAnAddress">
                                    <b>+</b>
                                </div>
                            </div>
                        </a>
                        <div class="emptyAddressField">
                            Пока нет ни одного адреса
                        </div>
                    {% endif %}
                </div>
            </div>
<!--        <div class="addressMenu flex">-->
<!--            <form action="" method="POST" class="flex">-->
<!--                <div class="flex btw">-->
<!--                    <span class="frm"><b>Адрес</b></span>-->
<!--                    <span class="closeIt" style=""><b>x</b></span>-->
<!--                </div>-->
<!--                <input name="action_type" type="text" value="add_address" style="display: none;">-->
<!--                <input type="text" name="name" maxlength="150" required="" id="name" placeholder="Название адреса">-->
<!--                <input type="text" name="city" maxlength="150" required="" id="city" placeholder="Город">-->
<!--                <input type="text" name="street" maxlength="150" required="" id="street" placeholder="Улица">-->
<!--                <input type="text" name="house" maxlength="150" required="" id="house" placeholder="Дом, корпус">-->
<!--                <input type="text" name="entrance" maxlength="150" required="" id="entrance" placeholder="Подъезд (при наличии)">-->
<!--                {% csrf_token %}-->
<!--                <input type="submit" value="Добавить" class="pointer">-->
<!--            </form>-->
<!--        </div>-->
<!--            <div id="map"></div>-->
        {% endif %}
        <div class="mapForProvider">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2692.396739189686!2d37.70401737743941!3d55.64590975658826!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNTXCsDM4JzQ1LjMiTiAzN8KwNDInMTQuNSJF!5e1!3m2!1sru!2sru!4v1618988358075!5m2!1sru!2sru" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy">
                                                                                                55.645909, 37.704017
            </iframe>
        </div>
        <!--        <div class="bottom">-->
<!--            Designed by somebody, 2021-->
<!--        </div>-->

        <script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
        <script src="{% static 'js/main.js' %}"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
        <script src="https://api-maps.yandex.ru/2.1/?apikey=37a70fdb-72f1-4d85-a872-a1be173b3791&lang=ru_RU" type="text/javascript"></script>
    </body>
</html>