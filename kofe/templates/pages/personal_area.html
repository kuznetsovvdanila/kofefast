<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <title>
            {{ user.first_name }} - kofefast
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <link rel="stylesheet" href="{% static 'css/PA_styles.css' %}">
    </head>
    <body>
        <div class="topMenu flex">
            <div class="logo" style="font-size: 4.5em;">
                <a href="{% url 'index' %}" style="color: #eeeeee;">kofefast</a>
            </div>
            {% if request.user.is_authenticated %}
            <div class="topMenuNotMobile" style="display: flex; justify-content: space-around; align-items: center; width: 200px;">
                <a href="{% url 'basket' %}">
                    <div class="basketImage pointer">

                    </div>
                </a>
                <a href="{% url 'personal_area' %}" style="color: #eeeeee;">
                    <div style="{% if user.profile_picture %} background-image: url({{ user.profile_picture.url }}); filter: none !important; border: 5px solid #eeeeee; border-radius: 40px; height: 70px !important; width: 70px !important; {% else %} background-image: url('../../static/img/anonymous.svg'); {% endif %} background-position: 50% 50%; background-size: cover;" class="defaultUserPhoto pointer">

                    </div>
                </a>
            </div>
            {% else %}
            <div>

            </div>
            {% endif %}
        </div>
        <hr class="lineMobile">
        <div class="mainPA flex">
            <div class="person flex">
                <div>
                    <div class="photo pointer" style="{% if user.profile_picture %} background-image: url({{ user.profile_picture.url }}); {% else %} background-image: url('../../static/img/anonymous.svg'); filter: invert(); background-size: 15% !important; background-repeat: repeat !important;{% endif %} background-position: 50% 50%; background-size: cover;">
                        <div class="changePhoto">

                        </div>
                    </div>
                </div>
                <div class="personInfo">
                    <div>
                        <span style="background-color: #deb887; color: #111111;"><b>{{ user.first_name }} {{ user.last_name }}</b></span>
                    </div>
                    <div>
                        {{ user.email }}
                    </div>
                    <div>
                        <b>{{ user.phone_number }}</b>
                    </div>
                </div>
            </div>
            <div class="info">
                <div class="adr pointer">
                    <div class="flex btw">
                        <div class="underln">
                            <b>Мои адреса</b>
                        </div>
                        <div class="opn active">
                            <b>ᐃ</b>
                        </div>
                    </div>
                </div>
                <div class="addresses flex">
                    {% if addresses %}
                        {% for adr in addresses %}
                            <div style="font-size: 1em;" class="address flex btw vCenter">
                                <div style="width: 100px;  margin-right: 0;">
                                    <span class="addressName">
                                        <b>{{ adr.name }}</b>
                                    </span>
                                </div>

                                {% if adr.chosen %}
                                <div class="flex" style="flex-direction: column; margin-left: 0; min-width: 50%;">
                                    <form action="" method="POST" class="inside flex">
                                        <input name="action_type" type="text" value="delete_prefer_address" style="display: none;">
                                        <input name="prefered_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                        {% csrf_token %}
                                        <input type="submit" value="Отменить выбор" class="chooseAnAddress pointer">
                                    </form>
                                    <form action="" method="POST" class="inside">
                                        <input name="action_type" type="text" value="delete_an_address" style="display: none;">
                                        <input name="delete_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                        {% csrf_token %}
                                        <input type="submit" class="deleteAnAddress" value="Удалить">
                                    </form>
                                </div>
                                {% else %}
                                <div class="flex" style="flex-direction: column; margin-left: 0; min-width: 60%;">
                                    <form action="" method="POST" class="inside flex">
                                        <input name="action_type" type="text" value="prefer_address" style="display: none;">
                                        <input name="prefered_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                        {% csrf_token %}
                                        <input type="submit" value="Доставлять сюда" class="chooseAnAddress pointer">
                                    </form>
                                    <form action="" method="POST" class="inside">
                                        <input name="action_type" type="text" value="delete_an_address" style="display: none;">
                                        <input name="delete_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                        {% csrf_token %}
                                        <input type="submit" class="deleteAnAddress" value="Удалить">
                                    </form>
                                </div>
                                {% endif %}
                            </div>
                            <div class="afterAddressMenu">
                                {% if adr.chosen %}
                                <div class="flex" style="margin-left: 0;">
                                    <form action="" method="POST" class="inside flex">
                                        <input name="action_type" type="text" value="delete_prefer_address" style="display: none;">
                                        <input name="prefered_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                        {% csrf_token %}
                                        <input type="submit" value="Отменить выбор" class="chooseAnAddress pointer">
                                    </form>
                                    <form action="" method="POST" class="inside">
                                        <input name="action_type" type="text" value="delete_an_address" style="display: none;">
                                        <input name="delete_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                        {% csrf_token %}
                                        <input type="submit" class="deleteAnAddress" value="Удалить">
                                    </form>
                                </div>
                                {% else %}
                                <div class="flex" style="margin-left: 0;">
                                    <form action="" method="POST" class="inside flex">
                                        <input name="action_type" type="text" value="prefer_address" style="display: none;">
                                        <input name="prefered_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                        {% csrf_token %}
                                        <input type="submit" value="Доставлять сюда" class="chooseAnAddress pointer">
                                    </form>
                                    <form action="" method="POST" class="inside">
                                        <input name="action_type" type="text" value="delete_an_address" style="display: none;">
                                        <input name="delete_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                        {% csrf_token %}
                                        <input type="submit" class="deleteAnAddress" value="Удалить">
                                    </form>
                                </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                    <div class="addAnAddress">
                        <b>+</b>
                    </div>
                    <div class="addAnAddressMobile">
                        <b>Добавить адрес</b>
                    </div>
                    {% else %}
                        <div class="address flex btw vCenter addressOpen">
                            <div>
                                <span class="addressName"><b>Добавьте адрес</b></span>
                            </div>
                            <div class="addAnAddress">
                                <b>+</b>
                            </div>
                        </div>
                    {% endif %}

                </div>
                <div class="ord pointer">
                    <div class="flex btw">
                        <div class="underln">
                            <b>Мои заказы</b>
                        </div>
                        <div class="cls active">
                            <b>ᐃ</b>
                        </div>
                    </div>
                </div>
                <div class="orders flex">
                    <div class="order flex btw vCenter">
                        <div>
                            <span class="orderName"><b>Сделайте ваш первый заказ</b></span>
                        </div>
                        <div>
                            <a href="{% url 'index' %}">
                                <div class="makeAnOrder">
                                    <b>+</b>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="addressMenu flex">
            <form action="" method="POST" class="flex">
                <div class="flex btw">
                    <span class="frm"><b>Адрес</b></span>
                    <span class="closeIt" style=""><b>x</b></span>
                </div>
                <input name="action_type" type="text" value="add_address" style="display: none;">
                <input type="text" name="name" maxlength="150" required="" id="name" placeholder="Название адреса">
                <input type="text" name="city" maxlength="150" required="" id="city" placeholder="Город">
                <input type="text" name="street" maxlength="150" required="" id="street" placeholder="Улица">
                <input type="text" name="house" maxlength="150" required="" id="house" placeholder="Дом, корпус">
                <input type="text" name="entrance" maxlength="150" required="" id="entrance" placeholder="Подъезд (при наличии)">
                {% csrf_token %}
                <input type="submit" value="Добавить" class="pointer">
            </form>
        </div>

        <div class="edit flex">
            <form action="" method="POST" class="input_file flex" enctype="multipart/form-data">
                <div class="flex btw">
                    <span class="frm"><b>Изменить</b></span>
                    <span class="closeIt" style=""><b>x</b></span>
                </div>
                <input name="action_type" type="text" value="changing_info" style="display: none;">
                <input type="text" name="first_name" maxlength="150" required="" id="first_name" placeholder="Имя" value="{{ request.user.first_name }}">
                <input type="text" name="last_name" maxlength="150" required="" id="last_name" placeholder="Фамилия" value="{{ request.user.last_name }}">
                <input type="text" name="email" maxlength="150" required="" id="email" placeholder="Почта" value="{{ request.user.email }}">
                <input type="text" name="phone_number" maxlength="150" required="" id="phone_number" placeholder="Телефон" value="{{ request.user.phone_number }}">
<!--                <input type="file" id="pro_pic" name="profile_picture" accept=".jpg, .jpeg, .png">-->

                <input class="" type="file" id="pro_pic" name="profile_picture" accept=".jpg, .jpeg, .png">
                <div class="fake_file">
                    <input type="text" class="fake_file_input" value="Добавить фото">
                </div>
                <a href="#" class="clear_input">Очистить</a>
                {% csrf_token %}
<!--                <input type="submit" value="Изменить пикчуу" class="pointer">-->
<!--                {% csrf_token %}-->
<!--                <input type="submit" value="Добавить" class="pointer">-->
                <input type="submit" value="Готово" class="pointer rltv editSubmit">
            </form>

        </div>

<!--        <div class="bottom flex clmn vCenter">-->
<!--            <div style="margin: 0 0 10px 0;">-->
<!--                Designed by somebody, 2021-->
<!--            </div>-->
<!--            <div>-->
<!--                <a style="color: #eeeeee; font-size: 2em;" href="{% url 'logout' %}">Выйти</a>-->
<!--            </div>-->
<!--        </div>-->

        <script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
        <script src="{% static 'js/personal_area.js' %}"></script>

    </body>
</html>