<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <title>
            kofefast
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <link rel="stylesheet" href="{% static 'css/basket.css' %}">
    </head>
    <body>

        <div class="topMenu flex">
            <div class="logo" style="font-size: 4.5em;">
                <a href="{% url 'index' %}" style="color: #eeeeee;">kofefast</a>
            </div>
            {% if request.user.is_authenticated %}
            <div class="topMenuNotMobile" style="display: flex; justify-content: space-around; align-items: center; width: 200px;">
                <a href="{% url 'basket' %}">
                    <div class="basketImage pointer">

                    </div>
                </a>
                <a href="{% url 'personal_area' %}" style="color: #eeeeee;">
                    <div style="{% if user.profile_picture %} background-image: url({{ user.profile_picture.url }}); filter: none !important; border: 5px solid #eeeeee; border-radius: 40px; height: 60px !important; width: 60px !important; {% else %} background-image: url('../../static/img/anonymous.svg'); {% endif %} background-position: 50% 50%; background-size: cover;" class="defaultUserPhoto pointer">

                    </div>
                </a>
            </div>
            {% else %}
            <div>

            </div>
            {% endif %}
        </div>

        <hr class="lineMobile">
        {% if not request.user.is_authenticated %}
        {% else %}
            <div class="mainAuth flex">
                <div class="hd">
                    Корзина
                </div>
<!--                <div class="categories flex">-->
<!--                    <div class="provider del active">-->
<!--                        Любая-->
<!--                    </div>-->
<!--                    {% for provider in providers %}-->
<!--                        <div id="{{ provider.id }}" class="provider">-->
<!--                            {{ provider.name }}-->
<!--                        </div>-->
<!--                    {% endfor %}-->
<!--                </div>-->
                <hr class="line" style="margin-bottom: 70px;">
                <div class="list">
                    <div class="coffee flex active">
                        {% for slot in chosen_items %}
                            <div id="{{ slot.good.provider.id }}" class="item show" style="background: linear-gradient(to left, rgba({{ slot.good.primary_color }}) 60%, transparent); background-image: url('{{ slot.good.preview.url }}'); background-size: cover; background-position: right 50%">
                                <div class="cntnr flex">
                                    <div class="itemName">
                                        <b><span>{{ slot.good.name }} - {{ slot.good.provided }}</span></b>
                                    </div>
                                    <div class="itemDescription">
                                        <span style="background-color: #111111; color: #eeeeee;">{{ slot.good.description }}</span>
                                    </div>
                                    <div class="itemPrice">
                                        <span><b>{{ slot.good.price }}₽</b></span>
                                    </div>
                                </div>
                                <div class="addToBasket flex reallySoftBorder clmn">
                                    <div>
                                        <form action="" method="POST">
                                            <input name="action_type" type="text" value="add {{ slot.good.id }}" style="display: none;">
                                            {% csrf_token %}
                                            <input type="submit" value="+" class="pointer">
                                        </form>
                                    </div>
                                    <div class="counter" style="">
                                        {{ slot.count }}
                                    </div>
                                    <div>
                                        <form action="" method="POST">
                                            <input name="action_type" type="text" value="reduce {{ slot.good.id }}" style="display: none;">
                                            {% csrf_token %}
                                            <input type="submit" value="-" class="pointer">
                                        </form>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

<!--            <div class="makeAnOrder flex vCenter btw">-->
<!--                <div class="flex btw" style="font-size: 2.5em; margin: 0 20px 0 20px; max-width: 60%; text-overflow: ellipsis; box-sizing: border-box;">-->
<!--                    {% for item in chosen_items %}-->
<!--                        <div style="margin: 0 20px 0 0;">-->
<!--                            {{ item.good.name }}-->
<!--                        </div>-->
<!--                    {% endfor %}-->
<!--                </div>-->

<!--                <div class="flex vCenter">-->
<!--                    <div style="font-size: 2.5em; background-color: #111111; border-radius: 200px; border: 5px solid #eeeeee; padding: 5px 10px 5px 10px;">-->
<!--                        {{ basket.all_cost }}-->
<!--                    </div>-->
<!--                    <form action="" method="POST">-->
<!--                        <input name="action_type" type="text" value="order" style="display: none;">-->
<!--                        {% csrf_token %}-->
<!--                        <input type="submit" value="Заказать" class="pointer">-->
<!--                    </form>-->
<!--                </div>-->
<!--            </div>-->

            <div class="addressMenuMainPage flex">
                <div class="arrowMobile">
                    <div class="arrow">
                        <b>ᐃ</b>
                    </div>
                </div>
                <div class="addressList">
                    <div>
                        Выберите адрес:
                    </div>
                    {% if addresses %}
                        {% for adr in addresses %}
                            {% if adr.chosen %}
                                <div style="border: 15px solid #deb887 !important;" class="address flex btw vCenter">
                                    <div>
                                        <span style="background-color: #eeeeee;" class="addressName"><b>{{ adr.city }}, {{ adr.street }} {{ adr.house }}, подъезд {{ adr.entrance }}</b></span>
                                    </div>
                                    <div class="">
                                        <form action="" method="POST" class="inside flex">
                                            <input name="action_type" type="text" value="delete_prefer_address" style="display: none;">
                                            <input name="prefered_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                            {% csrf_token %}
                                            <input type="submit" value="X" class="chooseAnAddress pointer">
                                        </form>
                                    </div>
                                </div>
                            {% else %}
                                <div class="address flex btw vCenter">
                                    <div>
                                        <span class="addressName"><b>{{ adr.city }}, {{ adr.street }} {{ adr.house }}, подъезд {{ adr.entrance }}</b></span>
                                    </div>
                                    <div class="">
                                        <form action="" method="POST" class="inside flex">
                                            <input name="action_type" type="text" value="prefer_address" style="display: none;">
                                            <input name="prefered_adr_id" type="text" value="{{adr.id}}" style="display: none;">
                                            {% csrf_token %}
                                            <input type="submit" value="✔" class="chooseAnAddress pointer">
                                        </form>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                        <div class="address flex btw vCenter">
                            <div>
                                <span class="addressNameAdd"><b>Добавьте адрес</b></span>
                            </div>
                            <div class="addAnAddress">
                                <b>+</b>
                        </div>
                    </div>
                    {% else %}
                        <div class="address flex btw vCenter">
                            <div>
                                <span class="addressNameAdd"><b>Добавьте адрес</b></span>
                            </div>
                            <div class="addAnAddress">
                                <b>+</b>
                            </div>
                        </div>
                        <div class="emptyAddressField">
                            Пока нет ни одного адреса
                        </div>
                    {% endif %}
                </div>
            </div>
<!--            <div id="map"></div>-->
        {% endif %}
<!--        <div class="bottom">-->
<!--            Designed by somebody, 2021-->
<!--        </div>-->

        <script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
        <script src="{% static 'js/main.js' %}"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
        <script async
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAAU8R6Wit9mEiBzIoDmt3m49Hz4XAJ1Og&callback=initMap">
        </script>
    </body>
</html>